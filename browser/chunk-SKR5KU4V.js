import{a as E}from"./chunk-SVE7YTCN.js";import{a as I,b as V,c as T,d as N,e as z,f as F,g as D,h as R}from"./chunk-X2MCTWXM.js";import{e as S,f as k}from"./chunk-MX4QNSKO.js";import{Ab as h,Bb as b,Ia as c,Ja as M,Sa as w,Xa as u,ec as y,ga as g,gb as d,ha as p,hc as L,ib as e,jb as t,nb as x,ob as m,pb as _,ub as C,vb as a,wb as v,xb as P,zb as O}from"./chunk-SWTW52KX.js";function W(s,o){s&1&&(e(0,"div",14),a(1," Email is required "),t())}function j(s,o){s&1&&(e(0,"div",14),a(1," Password is required "),t())}function q(s,o){if(s&1&&(e(0,"div",14),a(1),t()),s&2){let n=_();c(),P(" ",n.errorMessage," ")}}function B(s,o){if(s&1){let n=x();e(0,"div",15),m("click",function(){g(n);let r=_();return p(r.dismissError())}),e(1,"div",16),m("click",function(r){return g(n),p(r.stopPropagation())}),e(2,"div",17)(3,"h3"),a(4,"Login Failed"),t(),e(5,"button",18),m("click",function(){g(n);let r=_();return p(r.dismissError())}),a(6,"\xD7"),t()(),e(7,"div",19)(8,"p"),a(9),t()(),e(10,"div",20)(11,"button",21),m("click",function(){g(n);let r=_();return p(r.dismissError())}),a(12,"Close"),t()()()()}if(s&2){let n=_();c(9),v(n.errorMessage)}}var A=class s{constructor(o,n){this.authService=o;this.router=n}email="";password="";errorMessage="";isLoading=!1;showPopup=!1;login(){this.email.trim()===""||this.password.trim()===""||(this.isLoading=!0,this.errorMessage="",this.showPopup=!1,this.authService.login(this.email,this.password).subscribe({next:()=>{this.router.navigate(["/dashboard"])},error:o=>{if(console.log("Login error:",o),o.error){this.errorMessage=o.error.message||(typeof o.error=="string"?o.error:"Login failed");let n=o.error.errorType||o.error.error||(o.status===401?"INVALID_CREDENTIALS":"");(n==="USER_NOT_FOUND"||n==="INVALID_CREDENTIALS"||o.status===401)&&(this.showPopup=!0)}else this.errorMessage="Login failed. Please try again later.";this.isLoading=!1},complete:()=>{this.isLoading=!1}}))}dismissError(){this.errorMessage="",this.showPopup=!1}static \u0275fac=function(n){return new(n||s)(M(E),M(S))};static \u0275cmp=w({type:s,selectors:[["app-login"]],decls:25,vars:8,consts:[["loginForm","ngForm"],["emailField","ngModel"],["passwordField","ngModel"],[1,"login-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],["routerLink","/register"],["class","error-popup-overlay",3,"click",4,"ngIf"],[1,"error-message"],[1,"error-popup-overlay",3,"click"],[1,"error-popup",3,"click"],[1,"error-header"],[1,"close-btn",3,"click"],[1,"error-content"],[1,"error-actions"],[3,"click"]],template:function(n,i){if(n&1){let r=x();e(0,"div",3)(1,"h2"),a(2,"Login"),t(),e(3,"form",4,0),m("ngSubmit",function(){return g(r),p(i.login())}),e(5,"div",5)(6,"label",6),a(7,"Email"),t(),e(8,"input",7,1),b("ngModelChange",function(l){return g(r),h(i.email,l)||(i.email=l),p(l)}),t(),u(10,W,2,0,"div",8),t(),e(11,"div",5)(12,"label",9),a(13,"Password"),t(),e(14,"input",10,2),b("ngModelChange",function(l){return g(r),h(i.password,l)||(i.password=l),p(l)}),t(),u(16,j,2,0,"div",8),t(),u(17,q,2,1,"div",8),e(18,"button",11),a(19),t()(),e(20,"p"),a(21,"Don't have an account? "),e(22,"a",12),a(23,"Register"),t()()(),u(24,B,13,1,"div",13)}if(n&2){let r=C(4),f=C(9),l=C(15);c(8),O("ngModel",i.email),c(2),d("ngIf",f.invalid&&(f.touched||r.submitted)),c(4),O("ngModel",i.password),c(2),d("ngIf",l.invalid&&(l.touched||r.submitted)),c(),d("ngIf",i.errorMessage&&!i.showPopup),c(),d("disabled",i.isLoading),c(),P(" ",i.isLoading?"Logging in...":"Login"," "),c(5),d("ngIf",i.showPopup)}},dependencies:[k,L,y,R,F,I,V,T,D,z,N],styles:[".login-container[_ngcontent-%COMP%]{max-width:450px;margin:50px auto;padding:30px;background-color:#fff;border-radius:8px;box-shadow:0 4px 12px #00000014}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-weight:700;font-size:1.8rem;margin-bottom:25px;text-align:center}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:.95rem}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 15px;border-radius:4px;border:1px solid #ced4da;font-size:1rem;transition:border-color .3s}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.9rem;padding:5px 0}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px;padding:12px;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#66b0ff;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:25px;text-align:center;font-size:.95rem;color:#6c757d}.login-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;font-weight:500}.login-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 576px){.login-container[_ngcontent-%COMP%]{max-width:100%;margin:20px 15px;padding:20px}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:20px}}.error-popup-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1500;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.error-popup[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;width:100%;max-width:450px;box-shadow:0 5px 15px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;overflow:hidden}.error-popup[_ngcontent-%COMP%]   .error-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#dc3545;padding:15px 20px;color:#fff}.error-popup[_ngcontent-%COMP%]   .error-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600}.error-popup[_ngcontent-%COMP%]   .error-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:0;line-height:1}.error-popup[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{padding:20px}.error-popup[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1rem;line-height:1.5}.error-popup[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]{padding:15px 20px;display:flex;justify-content:flex-end;border-top:1px solid #eee}.error-popup[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:.9rem;font-weight:500;cursor:pointer;transition:background-color .3s}.error-popup[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}"]})};export{A as a};
